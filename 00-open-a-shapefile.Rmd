---
layout: post
title: "Open and plot shapefiles"
date:   2015-10-23 20:49:52
authors: "Joseph Stachelek, Leah Wasser"
dateCreated:  2015-10-23 20:49:52
lastModified: 2015-10-23 14:28:52
category: 
tags: []
mainTag: 
description: "This post explains the how to open and plot point, line, and polygon shapefiles in R."
code1: 
image:
  feature: NEONCarpentryHeader_2.png
  credit: Graphic: National Ecological Observatory Network (NEON)
  creditlink: http://www.neoninc.org
permalink: /R/Raster-Data-In-R/
code1: /R/2015-07-22-Introduction-to-Raster-Data-In-R.R
comments:

---

##About
This post explains the how to open and plot point, line, and polygon shapefiles in R.

###Goals / Objectives
After completing this activity, you will:

 * Understand the concept of point, line, and polygon shapefiles
 * Know how to open shapefiles (vector data)
 * Understand the components of a _spatial object_ (in R)
 
###Tools To Install

```{r Load Libraries}
suppressMessages(library(rgdal, quietly = TRUE))
library(raster)
```

###Recommended Pre-Lesson Reading

#About Vector Data
##Shapefiles: Points, Lines, and Polygons
Vector geospatial data can be expressed as collections of points, lines, and polygons. This data is most commonly held in _shapefiles_ which store information about the geometry of the geospatial data as well as _attributes_ that describe the data. More about shapefiles can found on [Wikipedia](https://en.wikipedia.org/wiki/Shapefile) (add link to Metadata lesson?).

##Importing shapefiles

We are going to use the `R` function `readOGR()` to import shapefiles stored on disk. These shapefiles include a polygon shapefile representing the boundaries of our study area, a line shapefile representing roads and streams, and a point shapefile representing the location of a NEON measurement tower.

```{r Import Shapefile}
prepath <- "NEON-R-Spatial-Vector"
#prepath <- ".."

#Import a polygon shapefile 
squarePlot <- readOGR(dsn = file.path(prepath, "/data/boundaryFiles/HARV/"), layer = "HarClip_UTMZ18")

#Import a line shapefile
lines <- readOGR(dsn = file.path(prepath, "/data/boundaryFiles/HARV/"),layer = "HARV_roadStream")

#Import a point shapefile 
point <- readOGR(dsn = file.path(prepath, "/data/boundaryFiles/HARV/"), layer = "HARVtower_UTM18N")
  
```

We can view a metadata/attribute summary of each shapefile by simplying entering the name of the `R` object in the console. Note that the metadata output includes the _class_, the number of _features_, the _extent_, and the _coordinate reference system_ (crs) of the `R` object. The last two lines of summary show a preview of the `R` object _attributes_.

```{r View Attribute Summary}
#View attributes
squarePlot
lines
point

```

##Plotting shapefiles

The `plot()` function can be used for basic plotting of these spatial objects. Note that we use the `add = TRUE` argument to _overplot_ the lines and point shapefile onto the polygon shapefile. 

```{r Plotting}
#Look at the shapefiles
plot(x = squarePlot, col = "purple")
plot(x = lines, add = TRUE)
plot(x = point, add  = TRUE, pch = 19, col = "red")
```

We can use the `col` argument to the `plot()` function to color our lines according to the _TYPE_ attribute. The following code chunk extracts a vector of this attribute, creates a character color vector of the same length, and changes the positions of this color vector that correspond to _footpath_.

```{r Color lines by attribute}
#color lines by TYPE attribute
type <- slot(object = lines, name = "data")$TYPE
col <- rep(x= "black", length = length(type))
col[type == "footpath"] <- "red"

plot(x = lines, col = col, add = TRUE)
```
